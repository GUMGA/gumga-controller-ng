!function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,a){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();t.QueryObject=function(){function e(t,r){a(this,e),this.service=t,this.controller=r,this.queryObject={start:this.service.start,pageSize:this.service.pageSize}}return n(e,[{key:"page",value:function(e){return e||(e=1),this._page=e,this.queryObject.start=(e-1)*this.queryObject.pageSize,this.controller.handlingStorage(this._page,this.queryObject.pageSize),this.controller.setPageInContainer(this._page),this.controller.page=e,this}},{key:"pageSize",value:function(e){return e||(e=10),this.queryObject.pageSize=e,this._page&&this.page(this._page),this.controller.handlingStorage(this._page,this.queryObject.pageSize),this}},{key:"aq",value:function(e){return e||console.error("Ao chamar o método um aq é obrigatório informar seu hql."),this.queryObject.aq=e,this}},{key:"q",value:function(e,t){var r=this;return e||console.error("Ao chamar o método um q é obrigatório informar os atributos que serão utilizados na busca."),this.queryObject.searchFields=this.queryObject.searchFields||[],e.trim().split(",").forEach(function(e){return r.queryObject.searchFields.push(e.trim())}),this.queryObject.q=t,this}},{key:"sort",value:function(e,t){return e||(e=this.controller.storage.get("field"),t=this.controller.storage.get("way")),t||(t="asc"),this.queryObject.sortField=(this.queryObject.sortField||"").concat(",").concat(e),","==this.queryObject.sortField.substring(0,1)&&(this.queryObject.sortField=this.queryObject.sortField.substring(1,this.queryObject.sortField.length)),this.queryObject.sortDir=(this.queryObject.sortDir||"").concat(",").concat(t),","==this.queryObject.sortDir.substring(0,1)&&(this.queryObject.sortDir=this.queryObject.sortDir.substring(1,this.queryObject.sortDir.length)),this}},{key:"gQuery",value:function(e){return this.queryObject.gQuery=e,this}},{key:"send",value:function(){var e=this;return this.service.sendQueryObject||console.error("Precisamos que você atualize a versão do componente gumga-rest-ng, acesse: https://github.com/GUMGA/gumga-rest-ng/releases"),this.service.sendQueryObject(this.queryObject).then(function(t){return e.controller.data=t.data.values,e.controller.pageSize=t.data.pageSize,e.controller.count=t.data.count,t})}}]),e}()},function(e,t,r){"use strict";var a=r(0);!function(){function e(e,t,r,n){var o=this;this.and=this,this.data=[],this.page=1,this.pageSize=10,this.count=0,this.records=[],this.pageModel=n,this.container=r,this.identifierOrConfiguration=t,this.storage={set:function(e,r){sessionStorage.setItem(t+"-"+e,r)},get:function(e){return sessionStorage.getItem(t+"-"+e)}},this.setPageInContainer=function(){if(!o.container[n]){var e=parseInt(o.storage.get("page")||o.page);o.container[n]=e}},this.handlingStorage=function(e,t,r,a,n){return e||(e=parseInt(o.storage.get("page")||o.page)),t||(t=parseInt(o.storage.get("pageSize")||o.pageSize)),r||(r=o.storage.get("field")),a||(a=o.storage.get("way")),n||(n=""),o.storage.set("page",e||o.page),o.storage.set("pageSize",t||o.pageSize),o.storage.set("field",r),o.storage.set("way",a),o.storage.set("param",n),{page:e,pageSize:t,field:r,way:a,param:n}},this.methods={getLatestOperation:function(){o.setPageInContainer();var e=o.storage.get("last-operation");switch(e||o.methods.get(o.storage.get("page"),o.storage.get("pageSize")),e){case"get":o.methods.get(o.storage.get("page"),o.storage.get("pageSize"));break;case"sort":o.methods.sort(o.storage.get("field"),o.storage.get("way"),o.storage.get("pageSize"));break;case"search":o.methods.search(o.storage.get("field"),o.storage.get("param"),o.storage.get("pageSize"),o.storage.get("page"));break;case"asyncSearch":o.methods.asyncSearch(o.storage.get("field"),o.storage.get("param"));break;case"advancedSearch":o.methods.advancedSearch(JSON.parse(o.storage.get("param")),o.storage.get("pageSize"),o.storage.get("page"));break;default:o.methods.get(o.storage.get("page"),o.storage.get("pageSize"))}},getRecords:function(){return o.records},asyncSearch:function(t,r){o.handlingStorage(void 0,void 0,t,void 0,r);return o.storage.set("last-operation","asyncSearch"),e.getSearch(t,r).then(function(e){return o.storage.set("pageSize",e.data.pageSize),e.data.values})},asyncPost:function(t,r){return o.emit("asyncPostStart"),e.save(t)},get:function(t,r){r||(r=o.pageSize),t||(t=o.page);o.handlingStorage(t,r);return o.storage.set("last-operation","get"),o.emit("getStart"),e.get(t,r).then(function(e){o.emit("getSuccess",e.data),o.data=e.data.values,o.pageSize=e.data.pageSize,o.count=e.data.count,o.storage.set("pageSize",e.data.pageSize),o.data.map(function(e){return o.records.push(e.id)})},function(e){o.emit("getError",e)}),o},getId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return o.emit("getIdStart"),e.getById(t).then(function(e){o.emit("getIdSuccess",e.data),o.data=e.data,o.pageSize&&delete o.pageSize,o.count&&delete o.count},function(e){o.emit("getIdError",e)}),o},getNew:function(){return o.emit("getNewStart"),e.getNew().then(function(e){o.emit("getNewSuccess",e.data),o.data=e.data,o.pageSize&&delete o.pageSize,o.count&&delete o.count},function(e){o.emit("getNewError",e)}),o},put:function(t){return o.emit("putStart"),e.update(t).then(function(e){o.emit("putSuccess",e)},function(e){o.emit("putError",e)}),o},post:function(t){return o.emit("postStart"),e.save(t).then(function(e){o.emit("postSuccess",e)},function(e){o.emit("postError",e)}),o},delete:function(t){return o.emit("deleteStart"),e.deleteCollection(t).then(function(e){o.emit("deleteSuccess",e)},function(e){o.emit("deleteError",e)}),o},sort:function(t,r,a){a||(a=o.pageSize);var n=o.handlingStorage(void 0,a,t,r),i=n.page;return o.storage.set("last-operation","sort"),o.emit("sortStart"),e.sort(t,r,a,i).then(function(e){o.emit("sortSuccess",e.data),o.data=e.data.values,o.pageSize=e.data.pageSize,o.count=e.data.count,o.storage.set("pageSize",e.data.pageSize)},function(e){o.emit("sortError",e)}),o},search:function(t,r,a,n){a||(a=o.pageSize),n||(n=o.page);o.handlingStorage(n,a,t,void 0,r);return o.storage.set("last-operation","search"),o.emit("searchStart"),e.getSearch(t,r,a,n).then(function(e){o.emit("searchSuccess",e.data),o.data=e.data.values,o.pageSize=e.data.pageSize,o.count=e.data.count,o.storage.set("pageSize",e.data.pageSize)},function(e){o.emit("searchError",e)}),o},advancedSearch:function(t,r,a){r||(r=o.pageSize),a||(a=o.page);o.handlingStorage(a,r,void 0,void 0,JSON.stringify(t));return o.storage.set("last-operation","advancedSearch"),o.emit("advancedSearchStart"),e.getAdvancedSearch(t,r,a).then(function(e){o.emit("advancedSearchSuccess",e.data),o.data=e.data.values,o.pageSize=e.data.pageSize,o.count=e.data.count,o.storage.set("pageSize",e.data.pageSize)},function(e){o.emit("advancedSearchError",e)}),o},searchWithGQuery:function(t,r,a){return a||(a=o.pageSize),r||(r=o.page),o.lastGQuery=t,o.emit("searchWithGQueryStart"),e.searchWithGQuery(t,r,a).then(function(e){o.emit("searchWithGQuerySuccess",e.data),o.data=e.data.values,o.pageSize=e.data.pageSize,o.count=e.data.count},function(e){o.emit("searchWithGQueryError",e)})},asyncSearchWithGQuery:function(t,r,a){return a||(a=o.pageSize),r||(r=o.page),o.lastGQuery=t,o.emit("asyncSearchWithGQuery"),e.searchWithGQuery(t,r,a).then(function(e){return o.emit("asyncSearchWithGQuery",e.data),o.pageSize=e.data.pageSize,o.count=e.data.count,e.data.values},function(e){o.emit("asyncSearchWithGQuery",e)})},redoSearch:function(){return o.emit("redoSearchStart"),e.redoSearch().then(function(e){o.emit("redoSearchSuccess",e.data),o.data=e.data.values,o.pageSize=e.data.pageSize,o.count=e.data.count},function(e){o.emit("redoSearchError",e)}),o},postQuery:function(t,r){return o.emit("postQueryStart"),e.saveQuery({query:t,name:r}).then(function(e){o.emit("postQuerySuccess")},function(e){o.emit("postQueryError",e)}),o},getQuery:function(t){return t||(t=o.page),o.emit("getQueryStart"),e.getQuery(t).then(function(e){return o.emit("getQuerySuccess",e.data),e.data.values},function(e){o.emit("getQueryError",e)})},postImage:function(t,r){return o.emit("postImageStart"),e.saveImage(t,r).then(function(e){return o.emit("postImageSuccess"),e},function(e){o.emit("postImageError",e)})},deleteImage:function(t,r){return o.emit("deleteImageStart"),e.deleteImage(t,r).then(function(e){o.emit("deleteImageSuccess")},function(e){o.emit("deleteImageError",e)}),o},reset:function(){return o.emit("resetStart"),e.resetDefaultState(),o},getAvailableTags:function(){return o.emit("getAvailableTagsStart"),e.getAvailableTags()},getSelectedTags:function(t){return o.emit("getSelectedTagsStart"),e.getSelectedTags(t)},postTags:function(t,r){o.emit("postTagStart",r),e.postTags(t,r).then(function(e){o.emit("postTagSuccess",r)},function(e){o.emit("postTagError",r)})},getDocumentationURL:function(){return o.emit("getDocumentationURLStart"),e.getDocumentationURL()},createQuery:function(){return new a.QueryObject(e,o)}}}function t(){function t(t,r,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"page",o=a.constructor;if(!t)throw"É necessário passar um objeto no primeiro parâmetro";if(!r)throw"É necessário passar um objeto no segundo parâmetro";if(o!==Object&&o!==String)throw"É necessário passar um objeto ou uma string no terceiro parâmetro";var i=this._createOptions(a);if(i.noScope)return new e(r,a,t,n);t[i.identifier]=new e(r,a,t,n)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.constructor===String)return{identifier:e,noScope:!1};var t=angular.extend({},e);if(t.noScope=!!t.noScope,!t.identifier)throw"Você precisa passar um identificador para o objeto de configuração do createRestMethods!";return t}return{createRestMethods:t,_createOptions:r}}e.prototype.callbacks={},e.prototype.and=this,e.prototype.emit=function(e,t){return this.callbacks[e]&&this.callbacks[e].forEach(function(e){e(t)}),this},e.prototype.on=function(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this},e.prototype.execute=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.constructor!==String)throw"O primeiro parâmetro deve ser uma string!";if(this.methods[e]){for(var t,r=arguments.length,a=Array(r>1?r-1:0),n=1;n<r;n++)a[n-1]=arguments[n];return(t=this.methods)[e].apply(t,a),this}throw"O nome do método está errado! Por favor coloque um método que está no GumgaController"},t.$inject=[],angular.module("gumga.controller",[]).factory("gumgaController",t)}()}]);